<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>CopyTable Sync</title>
</head>
<body>
  <h2>CopyTable Sync</h2>
  <button id="loginBtn">Đăng nhập với GitHub</button>

  <script>
    const CLIENT_ID = "Ov23liYPSFvbNCKxoYrB"; // Client ID của bạn
    const REDIRECT_URI = window.location.origin + "/api/callback";

    document.getElementById("loginBtn").onclick = () => {
      const githubAuthUrl =
        `https://github.com/login/oauth/authorize?client_id=${CLIENT_ID}&scope=gist&redirect_uri=${REDIRECT_URI}`;
      window.location.href = githubAuthUrl;
    };

    // Nhận token sau khi callback
    function handleCallback() {
      const params = new URLSearchParams(window.location.search);
      const token = params.get("token");
      if (token) {
        localStorage.setItem("github_token", token);
        alert("Đăng nhập thành công!\nToken đã lưu vào localStorage.");
        window.history.replaceState({}, document.title, "/");
      }
    }
    handleCallback();
  </script>
</body>
</html>
